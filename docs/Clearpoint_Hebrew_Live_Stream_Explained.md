
# 📡 תהליך מלא – איך לקוח רואה מצלמה בלייב דרך Clearpoint

---

## 🎯 מה הלקוח רוצה?
> “אני רוצה להיכנס לאתר ולראות את המצלמות שלי בלייב — מכל מקום.”

נשמע פשוט? בפועל זה כולל חיבור בין מצלמה מקומית, Raspberry Pi, ענן, ואתר אינטרנט.

---

## 🎥 שלב 1: המצלמה משדרת RTSP בתוך הבית/עסק
- לדוגמה: `rtsp://admin:123456@192.168.1.10:554/h264/ch1/main/av_stream`
- שידור זה לא זמין מהאינטרנט — רק מהרשת המקומית.

---

## 🧠 שלב 2: Raspberry Pi ליד המצלמות
- מחובר לרשת של הלקוח (Ethernet/Wi-Fi)
- מריץ `FFmpeg`:
  - 🔄 לוקח את ה-RTSP
  - 🎬 ממיר ל-HLS (פורמט שמתאים לדפדפן)
  - 🔁 חותך קטעים (למשל של 2 שניות)
  - 💾 שומר מקומית בתיקיה

---

## ☁️ שלב 3: העלאה לענן
- הקבצים (m3u8 ו־.ts) מועלים כל כמה שניות ל־**Backblaze B2**
- משם, **Bunny.net CDN** משדר אותם החוצה לצפייה מהירה ובטוחה

---

## 🌐 שלב 4: הלקוח נכנס לאתר (למשל `dashboard.clearpoint.co.il`)
- מתחבר עם מייל + סיסמה
- הדף מציג את הווידאו דרך נגן (HLS.js)
- הווידאו מוזרם מהענן — **לא מהמצלמה עצמה**
- עובד בכל מכשיר: מחשב, סמארטפון, טאבלט

---

## 🕒 עיכוב (דיליי)
- בגלל חלוקת השידור לקטעים של 2 שניות + באפר של הדפדפן:
  - הדיליי הוא כ־5–10 שניות
- ניתן לשפר:
  - `-hls_time 1` → קטעים קצרים יותר
  - `-hls_list_size 2` → באפר קצר יותר

---

## ✅ יתרונות
| פתרון | מאובטח? | נגיש מכל מקום? | דורש פתיחת פורטים? |
|--------|----------|------------------|----------------------|
| חיבור ישיר למצלמה | ❌ לא | ❌ לא תמיד | ✅ כן (סכנת פריצה) |
| Raspberry Pi + ענן | ✅ כן | ✅ כן | ❌ לא |

---

## 🔐 סיכום:
> Raspberry Pi ממיר את השידור מהמצלמה, מעלה לענן, והאתר שלך מציג ללקוח את הלייב — בצורה מאובטחת, פשוטה ונגישה מכל מקום.
